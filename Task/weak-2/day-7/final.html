<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DAY 7 - To-Do App</title>

    <!-- Bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body.dark {
            background: #121212;
            color: white;
        }

        body.dark .card {
            background: #1e1e1e;
            color: white;
        }

        .completed {
            text-decoration: line-through;
            color: gray;
        }

        .task-actions button {
            margin-left: 5px;
        }
    </style>
</head>
<body class="bg-light">

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">

            <div class="card shadow">
                <div class="card-body">

                    <div class="d-flex justify-content-between align-items-center">
                        <h3>üìù To-Do App</h3>
                        <button class="btn btn-sm btn-dark" id="themeBtn">üåô</button>
                    </div>

                    <hr>

                    <!-- Input -->
                    <div class="input-group mb-3">
                        <input type="text" id="taskInput" class="form-control" placeholder="Enter task">
                        <button class="btn btn-primary" id="addBtn">Add</button>
                    </div>
                    <small class="text-danger" id="errorMsg"></small>

                    <!-- Filters -->
                    <div class="btn-group my-3 w-100">
                        <button class="btn btn-outline-secondary" onclick="filterTasks('all')">All</button>
                        <button class="btn btn-outline-secondary" onclick="filterTasks('completed')">Completed</button>
                        <button class="btn btn-outline-secondary" onclick="filterTasks('pending')">Pending</button>
                    </div>

                    <!-- Task List -->
                    <ul class="list-group mb-3" id="taskList"></ul>

                    <!-- Counter -->
                    <p class="text-center">
                        Total: <span id="totalCount">0</span> |
                        Completed: <span id="completedCount">0</span>
                    </p>

                </div>
            </div>

        </div>
    </div>
</div>

<script>
    let tasks = [];
    let filterType = "all";

    const taskInput = document.getElementById("taskInput");
    const taskList = document.getElementById("taskList");
    const errorMsg = document.getElementById("errorMsg");

    // Add Task
    document.getElementById("addBtn").addEventListener("click", () => {
        let text = taskInput.value.trim();

        if (text === "") {
            errorMsg.innerText = "Task cannot be empty";
            return;
        }

        tasks.push({
            id: Date.now(),
            text: text,
            completed: false
        });

        taskInput.value = "";
        errorMsg.innerText = "";
        renderTasks();
    });

    // Render Tasks
    function renderTasks() {
        taskList.innerHTML = "";

        let filteredTasks = tasks.filter(task => {
            if (filterType === "completed") return task.completed;
            if (filterType === "pending") return !task.completed;
            return true;
        });

        filteredTasks.forEach(task => {
            let li = document.createElement("li");
            li.className = "list-group-item d-flex justify-content-between align-items-center";

            let span = document.createElement("span");
            span.innerText = task.text;
            span.className = task.completed ? "completed" : "";
            span.onclick = () => toggleComplete(task.id);

            let actions = document.createElement("div");
            actions.className = "task-actions";

            actions.innerHTML = `
                <button class="btn btn-sm btn-warning" onclick="editTask(${task.id})">Edit</button>
                <button class="btn btn-sm btn-danger" onclick="deleteTask(${task.id})">Delete</button>
            `;

            li.appendChild(span);
            li.appendChild(actions);
            taskList.appendChild(li);
        });

        updateCounter();
    }

    // Toggle Complete
    function toggleComplete(id) {
        tasks = tasks.map(task =>
            task.id === id ? { ...task, completed: !task.completed } : task
        );
        renderTasks();
    }

    // Delete Task
    function deleteTask(id) {
        tasks = tasks.filter(task => task.id !== id);
        renderTasks();
    }

    // Edit Task
    function editTask(id) {
        let task = tasks.find(t => t.id === id);
        let newText = prompt("Edit task", task.text);

        if (newText && newText.trim() !== "") {
            task.text = newText.trim();
            renderTasks();
        }
    }

    // Counter
    function updateCounter() {
        document.getElementById("totalCount").innerText = tasks.length;
        document.getElementById("completedCount").innerText =
            tasks.filter(task => task.completed).length;
    }

    // Filter
    function filterTasks(type) {
        filterType = type;
        renderTasks();
    }

    // Dark Mode
    document.getElementById("themeBtn").addEventListener("click", () => {
        document.body.classList.toggle("dark");
    });
</script>

</body>
</html>
